<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°ç‹¬ç¬”è®°åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
        }

        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .test-fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .test-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .mini-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: #333;
            border: 2px solid #333;
            width: 150px;
            height: 150px;
            margin: 10px 0;
        }

        .mini-cell {
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
        }

        .mini-cell:hover {
            background: #f0f8ff;
        }

        .notes-demo {
            position: relative;
            width: 50px;
            height: 50px;
            border: 1px solid #ccc;
            display: inline-block;
            margin: 5px;
        }

        .notes-demo .notes-container {
            pointer-events: none;
        }

        .notes-demo.has-notes .note-number.active {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ“ æ•°ç‹¬ç¬”è®°åŠŸèƒ½æµ‹è¯•</h1>

        <div class="test-section">
            <h3>æµ‹è¯• 1: ç¬”è®°å®¹å™¨åˆ›å»º</h3>
            <div id="test1-result"></div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 2: ç¬”è®°æ˜¾ç¤ºåŠŸèƒ½</h3>
            <div id="test2-result"></div>
            <div class="notes-demo" id="demo-cell">
                <div class="notes-container">
                    <div class="notes-grid">
                        <div class="note-number" data-number="1">1</div>
                        <div class="note-number" data-number="2">2</div>
                        <div class="note-number" data-number="3">3</div>
                        <div class="note-number" data-number="4">4</div>
                        <div class="note-number" data-number="5">5</div>
                        <div class="note-number" data-number="6">6</div>
                        <div class="note-number" data-number="7">7</div>
                        <div class="note-number" data-number="8">8</div>
                        <div class="note-number" data-number="9">9</div>
                    </div>
                </div>
            </div>
            <button onclick="testNotesDisplay()">æµ‹è¯•ç¬”è®°æ˜¾ç¤º</button>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯• 3: ç¬”è®°åˆ‡æ¢åŠŸèƒ½</h3>
            <div id="test3-result"></div>
            <button onclick="testNotesToggle()">æµ‹è¯•ç¬”è®°åˆ‡æ¢</button>
        </div>

        <div class="test-section">
            <h3>å®Œæ•´æ¸¸æˆæµ‹è¯•</h3>
            <p><a href="index.html" target="_blank">æ‰“å¼€å®Œæ•´æ¸¸æˆæµ‹è¯•ç¬”è®°åŠŸèƒ½</a></p>
        </div>
    </div>

    <script>
        // æµ‹è¯•1: ç¬”è®°å®¹å™¨åˆ›å»º
        function testNotesContainer() {
            const result = document.getElementById('test1-result');

            // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„æ¸¸æˆç¯å¢ƒ
            const mockCell = document.createElement('div');
            mockCell.className = 'sudoku-cell';
            mockCell.dataset.row = '0';
            mockCell.dataset.col = '0';

            // åˆ›å»ºç¬”è®°å®¹å™¨ï¼ˆæ¨¡æ‹ŸcreateBoardå‡½æ•°ï¼‰
            const notesContainer = document.createElement('div');
            notesContainer.className = 'notes-container';

            let gridHTML = '<div class="notes-grid">';
            for (let i = 1; i <= 9; i++) {
                gridHTML += `<div class="note-number" data-number="${i}">${i}</div>`;
            }
            gridHTML += '</div>';
            notesContainer.innerHTML = gridHTML;

            mockCell.appendChild(notesContainer);

            // æ£€æŸ¥åˆ›å»ºç»“æœ
            const containerFound = mockCell.querySelector('.notes-container') !== null;
            const gridFound = mockCell.querySelector('.notes-grid') !== null;
            const noteNumbers = mockCell.querySelectorAll('.note-number');
            const correctCount = noteNumbers.length === 9;

            let html = '';
            if (containerFound) {
                html += '<div class="test-pass">âœ… ç¬”è®°å®¹å™¨åˆ›å»ºæˆåŠŸ</div>';
            } else {
                html += '<div class="test-fail">âŒ ç¬”è®°å®¹å™¨åˆ›å»ºå¤±è´¥</div>';
            }

            if (gridFound) {
                html += '<div class="test-pass">âœ… ç¬”è®°ç½‘æ ¼åˆ›å»ºæˆåŠŸ</div>';
            } else {
                html += '<div class="test-fail">âŒ ç¬”è®°ç½‘æ ¼åˆ›å»ºå¤±è´¥</div>';
            }

            if (correctCount) {
                html += '<div class="test-pass">âœ… ç¬”è®°æ•°å­—æ•°é‡æ­£ç¡® (9ä¸ª)</div>';
            } else {
                html += '<div class="test-fail">âŒ ç¬”è®°æ•°å­—æ•°é‡é”™è¯¯ (' + noteNumbers.length + 'ä¸ª)</div>';
            }

            result.innerHTML = html;
        }

        // æµ‹è¯•2: ç¬”è®°æ˜¾ç¤ºåŠŸèƒ½
        function testNotesDisplay() {
            const result = document.getElementById('test2-result');
            const demoCell = document.getElementById('demo-cell');

            // æ¨¡æ‹Ÿæ·»åŠ ç¬”è®°
            demoCell.classList.add('has-notes');
            const noteNumbers = demoCell.querySelectorAll('.note-number');

            // æ¿€æ´»ä¸€äº›æ•°å­—
            const testNumbers = [1, 3, 5, 7, 9];
            noteNumbers.forEach(note => {
                const num = parseInt(note.dataset.number);
                if (testNumbers.includes(num)) {
                    note.classList.add('active');
                }
            });

            let html = '<div class="test-info">ğŸ“ å·²æ·»åŠ ç¬”è®°æ•°å­—: 1, 3, 5, 7, 9</div>';

            // æ£€æŸ¥æ˜¾ç¤ºçŠ¶æ€
            const hasNotesClass = demoCell.classList.contains('has-notes');
            const activeNotes = demoCell.querySelectorAll('.note-number.active');

            if (hasNotesClass) {
                html += '<div class="test-pass">âœ… has-notes ç±»å·²æ·»åŠ </div>';
            } else {
                html += '<div class="test-fail">âŒ has-notes ç±»æœªæ·»åŠ </div>';
            }

            if (activeNotes.length === 5) {
                html += '<div class="test-pass">âœ… æ¿€æ´»ç¬”è®°æ•°é‡æ­£ç¡® (5ä¸ª)</div>';
            } else {
                html += '<div class="test-fail">âŒ æ¿€æ´»ç¬”è®°æ•°é‡é”™è¯¯ (' + activeNotes.length + 'ä¸ª)</div>';
            }

            result.innerHTML = html;
        }

        // æµ‹è¯•3: ç¬”è®°åˆ‡æ¢åŠŸèƒ½
        function testNotesToggle() {
            const result = document.getElementById('test3-result');
            const demoCell = document.getElementById('demo-cell');

            // æ¨¡æ‹Ÿåˆ‡æ¢ç¬”è®°æ•°å­—
            const note3 = demoCell.querySelector('.note-number[data-number="3"]');
            const note5 = demoCell.querySelector('.note-number[data-number="5"]');

            let html = '';

            if (note3 && note5) {
                // åˆ‡æ¢æ•°å­—3ï¼ˆç§»é™¤ï¼‰
                if (note3.classList.contains('active')) {
                    note3.classList.remove('active');
                    html += '<div class="test-pass">âœ… æ•°å­—3ç¬”è®°å·²ç§»é™¤</div>';
                }

                // åˆ‡æ¢æ•°å­—5ï¼ˆå¦‚æœå·²æ¿€æ´»åˆ™ç§»é™¤ï¼Œå¦åˆ™æ¿€æ´»ï¼‰
                if (note5.classList.contains('active')) {
                    note5.classList.remove('active');
                    html += '<div class="test-pass">âœ… æ•°å­—5ç¬”è®°å·²ç§»é™¤</div>';
                } else {
                    note5.classList.add('active');
                    html += '<div class="test-pass">âœ… æ•°å­—5ç¬”è®°å·²æ·»åŠ </div>';
                }
            } else {
                html += '<div class="test-fail">âŒ æ‰¾ä¸åˆ°ç¬”è®°æ•°å­—å…ƒç´ </div>';
            }

            const finalActiveCount = demoCell.querySelectorAll('.note-number.active').length;
            html += '<div class="test-info">å½“å‰æ¿€æ´»ç¬”è®°æ•°é‡: ' + finalActiveCount + '</div>';

            result.innerHTML = html;
        }

        // é¡µé¢åŠ è½½æ—¶è¿è¡ŒåŸºç¡€æµ‹è¯•
        window.onload = function() {
            testNotesContainer();
        };
    </script>
</body>
</html>